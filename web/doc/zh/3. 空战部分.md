> **Notice**  
> This document is part of an independent, unofficial analysis of *Call of War* game mechanics.  
> Licensed under CC BY 4.0 unless otherwise noted.

## 概述
本文档介绍了计算器中空战及空对地部分机制模拟的来源逻辑。所有内容均为个人研究成果，未经官方认证。如有任何疑问，请参阅官方文档，相关部分可参见[Air_combat](https://wiki.callofwar.com/wiki/COMBAT#Air_combat)以及[Attacking_vs._Defending](https://wiki.callofwar.com/wiki/COMBAT#Attacking_vs._Defending)。

## 巡逻
当选中常规飞机时，通常会有 `Patrol` 指令选项。在中文社区中常被称为"盘旋"、"盘攻"或"巡逻"，本文统一使用**巡逻**以贴合游戏原文。

根据官方定义，巡逻状态下的飞机每15分钟进行一次伤害结算，并在此过程中受到50%的反击伤害，同时造成50%的攻击伤害[⁴](6.%20%E5%8F%82%E8%80%83.md#⁴)。飞机的视野外圈（View Range的`5/3`）即为其攻击范围。每当巡逻阶段结束时，飞机会对范围内的**敌对单位**生成一次伤害上下文。对于省份的士气和建筑，通常仅会对飞机巡逻位置所在的省份造成伤害。

## 空战
在直接攻击（即一方飞机攻击另一方飞机）的情况下，空战的机制与陆战类似：生成一个伤害上下文，计算并应用进攻和反击伤害。

然而，在双方飞机互相巡逻的情况下，巡逻阶段结束的先后顺序会影响伤害结算的顺序。先结束巡逻的飞机首先生成伤害上下文，并且通常飞机的攻击伤害大于反击伤害。这使得后结束巡逻的飞机会先受到反击伤害，再进行主动攻击，从而导致伤害效率降低。这便是常见的“先手优势”现象。

## 空对地/空对海
当飞机对飞机以外的目标（包括地面或海面单位）进行攻击时，伤害上下文的计算方式有所不同。在此情境下：
- 地面或海面目标会首先结算反击伤害
- 飞机在受到反击伤害并更新其状态（如血量、伤害效率等）
- 然后才会进行攻击伤害的计算并应用。

i.e. 当地面或海面单位的`vs. Airplane`伤害值高于飞机的总血量时，飞机会直接被击落而不会造成任何攻击伤害。

## 特性
通过社区测试，我们发现以下特性：
- 当停留在地面的飞机（含货车状态）被另一架飞机直接攻击时，不会造成任何反击伤害。
- 当停留在地面的飞机被非飞机单位攻击，且该位置上同时有其他陆军单位时，飞机不会为地面单位分摊伤害。相反，飞机将会受到进攻方的全额`vs. Airplane`攻击伤害。例如，当一艘1级的`Allies`巡洋舰对地面上的步兵Stack及同位置上的飞机Stack进行轰炸时，巡洋舰会对步兵输出1.5的攻击伤害，同时对飞机输出6的攻击伤害。

## NEXT PART

本文档仅介绍了空战部分的机制。如希望了解伤害结算的详细机制，请继续阅读第四部分：

➡ **[第四部分：伤害结算说明](4.%20%E4%BC%A4%E5%AE%B3%E7%BB%93%E7%AE%97.md)**